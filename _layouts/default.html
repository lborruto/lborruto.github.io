<!DOCTYPE html>
<html lang="en" data-theme="dark-poole">
{% include head.html %}

<body>
  <!-- Theme Toggle Button -->
  <div id="theme-toggle">
    <button class="toggle-theme">
      <span class="icon">ðŸŒ™</span>
    </button>
  </div>

  <div class="container content">
    <header class="masthead">
      <h3 class="masthead-title">
        <a href="{{ site.baseurl }}/" title="Home">{{ site.title }}</a>

        <nav class="nav">
          {% for nav in site.nav %}
          <small><a href="{{ nav.url }}">{{ nav.title }}</a></small>
          {% endfor %}
        </nav>
      </h3>
    </header>

    <main>
      {{ content }}
    </main>

    <footer class="footer">
      <small>
        &copy;
        <time datetime="{{ site.time | date_to_xmlschema }}">{{ site.time | date: '%Y' }}</time>. All rights reserved.
      </small>
    </footer>
  </div>

  {% if site.ga_analytics %}
  <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "https://www.google-analytics.com/analytics.js",
      "ga"
    );
    ga("create", "{{ site.ga_analytics }}", "auto");
    ga("send", "pageview");
  </script>
  {% endif %}

  <!-- Theme Toggle Script -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const toggleButton = document.querySelector(".toggle-theme");
      const icon = toggleButton.querySelector(".icon");

      // Check for saved user preference
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme) {
        document.documentElement.setAttribute("data-theme", savedTheme);
        icon.textContent = savedTheme === "light-poole" ? "ðŸŒž" : "ðŸŒ™";
      } else {
        document.documentElement.setAttribute("data-theme", "dark-poole"); // Default to dark
      }

      // Toggle theme on click
      toggleButton.addEventListener("click", () => {
        const currentTheme = document.documentElement.getAttribute("data-theme");
        const newTheme = currentTheme === "dark-poole" ? "light-poole" : "dark-poole";
        document.documentElement.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
        icon.textContent = newTheme === "light-poole" ? "ðŸŒž" : "ðŸŒ™";
      });
    });
  </script>

  <style>
    /* Theme Toggle Button Styling */
    #theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
    }

    .toggle-theme {
      background: none;
      border: none;
      color: inherit;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .toggle-theme .icon {
      transition: color 0.3s ease;
    }
  </style>
</body>

</html>